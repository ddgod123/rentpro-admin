# æˆ·å‹ç®¡ç†é¡µé¢å­—æ®µå±•ç¤ºåˆ†ææŠ¥å‘Š

**åˆ†ææ—¥æœŸï¼š** 2024å¹´12æœˆ
**åˆ†æèŒƒå›´ï¼š** å‰ç«¯é¡µé¢å±•ç¤º + åç«¯APIæ¥å£ + æ•°æ®æ¨¡å‹
**é¡µé¢è·¯å¾„ï¼š** `/rental/building/:buildingId/house-types`

## ğŸ¯ åˆ†ææ¦‚è§ˆ

### é¡µé¢åŠŸèƒ½
æˆ·å‹ç®¡ç†é¡µé¢æ˜¯æ¥¼ç›˜ç®¡ç†çš„å­é¡µé¢ï¼Œç”¨äºå±•ç¤ºå’Œç®¡ç†æŸä¸ªæ¥¼ç›˜ä¸‹çš„æ‰€æœ‰æˆ·å‹ä¿¡æ¯ã€‚

### æ•°æ®æµç¨‹
```
æ•°æ®åº“(sys_house_types) â†’ åç«¯API â†’ å‰ç«¯é¡µé¢å±•ç¤º
```

## ğŸ“Š å­—æ®µå±•ç¤ºåˆ†æ

### 1. å‰ç«¯é¡µé¢å±•ç¤ºå­—æ®µï¼ˆè¡¨æ ¼åˆ—ï¼‰

**è¡¨æ ¼ç»“æ„ï¼š**
```vue
<el-table :data="houseTypesData" border style="width: 100%">
```

**å±•ç¤ºçš„å­—æ®µï¼ˆå…±8åˆ—ï¼‰ï¼š**

| åºå· | åˆ—å | å­—æ®µæ¥æº | å®½åº¦ | å¯¹é½æ–¹å¼ | æ˜¾ç¤ºæ ¼å¼ | è¯´æ˜ |
|------|------|----------|------|----------|----------|------|
| 1 | **ID** | `row.id` | 80px | å·¦å¯¹é½ | æ•°å­— | æˆ·å‹ä¸»é”®ID |
| 2 | **æˆ·å‹åç§°** | `row.name` | 120px+ | å·¦å¯¹é½ | æ–‡æœ¬ | æˆ·å‹åç§°ï¼Œå¦‚"ç»å…¸ä¸€å±…" |
| 3 | **æˆ·å‹ç¼–ç ** | `row.code` | 100px | å·¦å¯¹é½ | æ–‡æœ¬ | æˆ·å‹ç¼–ç ï¼Œå¦‚"A1" |
| 4 | **æˆ·å‹è§„æ ¼** | ç»„åˆå­—æ®µ | 120px | å·¦å¯¹é½ | ç»„åˆæ–‡æœ¬ | `${rooms}å®¤${halls}å…${bathrooms}å«` |
| 5 | **æ ‡å‡†é¢ç§¯** | `row.standard_area` | 100px | å³å¯¹é½ | æ•°å­—+å•ä½ | `${standard_area}ã¡` |
| 6 | **åŸºå‡†ä»·æ ¼** | ç»„åˆå­—æ®µ | 150px | å³å¯¹é½ | æ¡ä»¶æ˜¾ç¤º | å”®ä»·å’Œç§Ÿé‡‘ï¼ˆå¦‚æœ>0åˆ™æ˜¾ç¤ºï¼‰ |
| 7 | **åº“å­˜ç»Ÿè®¡** | ç»„åˆå­—æ®µ | 120px | å±…ä¸­ | å¤šè¡Œæ˜¾ç¤º | æ€»æ•°å’Œå¯ç”¨æ•°é‡ |
| 8 | **çŠ¶æ€** | `row.status` | 80px | å±…ä¸­ | æ ‡ç­¾ | active=æ­£å¸¸, å…¶ä»–=åœç”¨ |
| 9 | **æ“ä½œ** | - | 200px | å›ºå®šå³ä¾§ | æŒ‰é’®ç»„ | æŸ¥çœ‹æˆ¿å±‹/ç¼–è¾‘/åˆ é™¤ |

### 2. å­—æ®µè¯¦ç»†æ˜¾ç¤ºé€»è¾‘

#### **æˆ·å‹è§„æ ¼ï¼ˆç»„åˆæ˜¾ç¤ºï¼‰**
```vue
<template #default="{ row }">
  {{ row.rooms }}å®¤{{ row.halls }}å…{{ row.bathrooms }}å«
</template>
```
- **æ•°æ®æ¥æºï¼š** `rooms`, `halls`, `bathrooms`
- **æ˜¾ç¤ºç¤ºä¾‹ï¼š** "2å®¤1å…1å«", "3å®¤2å…2å«"

#### **æ ‡å‡†é¢ç§¯**
```vue
<template #default="{ row }">
  {{ row.standard_area }}ã¡
</template>
```
- **æ•°æ®æ¥æºï¼š** `standard_area`
- **æ˜¾ç¤ºç¤ºä¾‹ï¼š** "85.50ã¡", "108.00ã¡"

#### **åŸºå‡†ä»·æ ¼ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰**
```vue
<template #default="{ row }">
  <div v-if="row.base_sale_price > 0">
    å”®: {{ formatPrice(row.base_sale_price) }}ä¸‡
  </div>
  <div v-if="row.base_rent_price > 0">
    ç§Ÿ: {{ row.base_rent_price }}å…ƒ/æœˆ
  </div>
</template>
```
- **æ•°æ®æ¥æºï¼š** `base_sale_price`, `base_rent_price`
- **æ˜¾ç¤ºé€»è¾‘ï¼š** åªæ˜¾ç¤ºå¤§äº0çš„ä»·æ ¼
- **æ ¼å¼åŒ–ï¼š** å”®ä»·è½¬æ¢ä¸ºä¸‡å…ƒå•ä½
- **æ˜¾ç¤ºç¤ºä¾‹ï¼š** 
  ```
  å”®: 280ä¸‡
  ç§Ÿ: 3500å…ƒ/æœˆ
  ```

#### **åº“å­˜ç»Ÿè®¡**
```vue
<template #default="{ row }">
  <div class="stock-info">
    <div>æ€»æ•°: {{ row.total_stock || 0 }}</div>
    <div>å¯ç”¨: {{ row.available_stock || 0 }}</div>
  </div>
</template>
```
- **æ•°æ®æ¥æºï¼š** `total_stock`, `available_stock`
- **æ˜¾ç¤ºç¤ºä¾‹ï¼š**
  ```
  æ€»æ•°: 50
  å¯ç”¨: 35
  ```

#### **çŠ¶æ€æ ‡ç­¾**
```vue
<template #default="{ row }">
  <el-tag :type="row.status === 'active' ? 'success' : 'warning'">
    {{ row.status === 'active' ? 'æ­£å¸¸' : 'åœç”¨' }}
  </el-tag>
</template>
```
- **æ•°æ®æ¥æºï¼š** `status`
- **æ˜¾ç¤ºé€»è¾‘ï¼š** active=ç»¿è‰²"æ­£å¸¸", å…¶ä»–=æ©™è‰²"åœç”¨"

## ğŸ”Œ åç«¯APIæ¥å£åˆ†æ

### APIç«¯ç‚¹
```
GET /api/v1/house-types/building/:buildingId
```

### æŸ¥è¯¢å­—æ®µï¼ˆSQL SELECTï¼‰
```sql
SELECT 
    id, name, code, description, building_id,
    standard_area, rooms, halls, bathrooms, balconies, floor_height,
    standard_orientation, standard_view,
    base_sale_price, base_rent_price, base_sale_price_per, base_rent_price_per,
    total_stock, available_stock, sold_stock, rented_stock, reserved_stock,
    status, is_hot, main_image, floor_plan_url,
    created_at, updated_at
FROM sys_house_types 
WHERE building_id = ? AND deleted_at IS NULL
ORDER BY id DESC 
LIMIT ? OFFSET ?
```

### è¿”å›çš„å®Œæ•´å­—æ®µï¼ˆå…±24ä¸ªå­—æ®µï¼‰

| åˆ†ç±» | å­—æ®µå | æ•°æ®ç±»å‹ | è¯´æ˜ | å‰ç«¯æ˜¯å¦å±•ç¤º |
|------|--------|----------|------|-------------|
| **åŸºç¡€ä¿¡æ¯** | `id` | number | ä¸»é”®ID | âœ… å±•ç¤º |
| | `name` | string | æˆ·å‹åç§° | âœ… å±•ç¤º |
| | `code` | string | æˆ·å‹ç¼–ç  | âœ… å±•ç¤º |
| | `description` | string | æˆ·å‹æè¿° | âŒ ä¸å±•ç¤º |
| | `building_id` | number | æ¥¼ç›˜ID | âŒ ä¸å±•ç¤º |
| **æˆ·å‹è§„æ ¼** | `standard_area` | number | æ ‡å‡†é¢ç§¯ | âœ… å±•ç¤º |
| | `rooms` | number | æˆ¿é—´æ•° | âœ… å±•ç¤ºï¼ˆç»„åˆï¼‰ |
| | `halls` | number | å®¢å…æ•° | âœ… å±•ç¤ºï¼ˆç»„åˆï¼‰ |
| | `bathrooms` | number | å«ç”Ÿé—´æ•° | âœ… å±•ç¤ºï¼ˆç»„åˆï¼‰ |
| | `balconies` | number | é˜³å°æ•° | âŒ ä¸å±•ç¤º |
| | `floor_height` | number | å±‚é«˜ | âŒ ä¸å±•ç¤º |
| **æœå‘æ™¯è§‚** | `standard_orientation` | string | æ ‡å‡†æœå‘ | âŒ ä¸å±•ç¤º |
| | `standard_view` | string | æ ‡å‡†æ™¯è§‚ | âŒ ä¸å±•ç¤º |
| **ä»·æ ¼ä¿¡æ¯** | `base_sale_price` | number | åŸºå‡†å”®ä»· | âœ… å±•ç¤ºï¼ˆæ¡ä»¶ï¼‰ |
| | `base_rent_price` | number | åŸºå‡†ç§Ÿé‡‘ | âœ… å±•ç¤ºï¼ˆæ¡ä»¶ï¼‰ |
| | `base_sale_price_per` | number | å”®ä»·å•ä»· | âŒ ä¸å±•ç¤º |
| | `base_rent_price_per` | number | ç§Ÿé‡‘å•ä»· | âŒ ä¸å±•ç¤º |
| **åº“å­˜ç»Ÿè®¡** | `total_stock` | number | æ€»åº“å­˜ | âœ… å±•ç¤º |
| | `available_stock` | number | å¯ç”¨åº“å­˜ | âœ… å±•ç¤º |
| | `sold_stock` | number | å·²å”®åº“å­˜ | âŒ ä¸å±•ç¤º |
| | `rented_stock` | number | å·²ç§Ÿåº“å­˜ | âŒ ä¸å±•ç¤º |
| | `reserved_stock` | number | é¢„è®¢åº“å­˜ | âŒ ä¸å±•ç¤º |
| **çŠ¶æ€ä¿¡æ¯** | `status` | string | çŠ¶æ€ | âœ… å±•ç¤º |
| | `is_hot` | boolean | æ˜¯å¦çƒ­é—¨ | âŒ ä¸å±•ç¤º |
| **å›¾ç‰‡ä¿¡æ¯** | `main_image` | string | ä¸»å›¾URL | âŒ ä¸å±•ç¤º |
| | `floor_plan_url` | string | æˆ·å‹å›¾URL | âŒ ä¸å±•ç¤º |
| **æ—¶é—´ä¿¡æ¯** | `created_at` | string | åˆ›å»ºæ—¶é—´ | âŒ ä¸å±•ç¤º |
| | `updated_at` | string | æ›´æ–°æ—¶é—´ | âŒ ä¸å±•ç¤º |

## ğŸ“ˆ å­—æ®µåˆ©ç”¨ç‡åˆ†æ

### å±•ç¤ºå­—æ®µç»Ÿè®¡
- **æ€»æŸ¥è¯¢å­—æ®µï¼š** 24ä¸ª
- **å‰ç«¯å±•ç¤ºå­—æ®µï¼š** 11ä¸ªï¼ˆéƒ¨åˆ†ç»„åˆæ˜¾ç¤ºï¼‰
- **å­—æ®µåˆ©ç”¨ç‡ï¼š** 45.8%

### å±•ç¤ºå­—æ®µåˆ†ç±»
- **ç›´æ¥å±•ç¤ºï¼š** 4ä¸ªï¼ˆid, name, code, statusï¼‰
- **ç»„åˆå±•ç¤ºï¼š** 3ä¸ªï¼ˆæˆ·å‹è§„æ ¼ã€åŸºå‡†ä»·æ ¼ã€åº“å­˜ç»Ÿè®¡ï¼‰
- **æ ¼å¼åŒ–æ˜¾ç¤ºï¼š** 2ä¸ªï¼ˆæ ‡å‡†é¢ç§¯ã€çŠ¶æ€æ ‡ç­¾ï¼‰
- **æ¡ä»¶å±•ç¤ºï¼š** 2ä¸ªï¼ˆå”®ä»·ã€ç§Ÿé‡‘ï¼‰

### æœªå±•ç¤ºçš„å­—æ®µ
**å¯èƒ½æœ‰å±•ç¤ºä»·å€¼çš„å­—æ®µï¼š**
- `balconies` - é˜³å°æ•°ï¼ˆå¯åŠ å…¥æˆ·å‹è§„æ ¼ï¼‰
- `floor_height` - å±‚é«˜ï¼ˆé‡è¦è§„æ ¼ä¿¡æ¯ï¼‰
- `standard_orientation` - æœå‘ï¼ˆé‡è¦å–ç‚¹ï¼‰
- `is_hot` - çƒ­é—¨æ ‡è®°ï¼ˆè¥é”€æ ‡è¯†ï¼‰
- `base_sale_price_per` - å”®ä»·å•ä»·ï¼ˆä¾¿äºæ¯”è¾ƒï¼‰
- `base_rent_price_per` - ç§Ÿé‡‘å•ä»·ï¼ˆä¾¿äºæ¯”è¾ƒï¼‰

**è¯¦ç»†åº“å­˜ä¿¡æ¯ï¼š**
- `sold_stock` - å·²å”®æ•°é‡
- `rented_stock` - å·²ç§Ÿæ•°é‡
- `reserved_stock` - é¢„è®¢æ•°é‡

## ğŸ¨ UIè®¾è®¡åˆ†æ

### è¡¨æ ¼å¸ƒå±€
- **æ€»å®½åº¦ï¼š** è‡ªé€‚åº”ï¼ˆ100%ï¼‰
- **åˆ—å®½åˆ†é…ï¼š** å›ºå®šå®½åº¦ + æœ€å°å®½åº¦ + è‡ªé€‚åº”
- **æ“ä½œåˆ—ï¼š** å›ºå®šåœ¨å³ä¾§ï¼Œå®½åº¦200px

### æ•°æ®å±•ç¤ºç‰¹ç‚¹
1. **ä¿¡æ¯å¯†åº¦é«˜ï¼š** åœ¨æœ‰é™ç©ºé—´å†…å±•ç¤ºæ ¸å¿ƒä¿¡æ¯
2. **è§†è§‰å±‚æ¬¡æ¸…æ™°ï¼š** ä½¿ç”¨å¯¹é½æ–¹å¼å’Œæ ¼å¼åŒ–çªå‡ºé‡ç‚¹
3. **äº¤äº’å‹å¥½ï¼š** é‡è¦æ“ä½œæŒ‰é’®çªå‡ºæ˜¾ç¤º
4. **çŠ¶æ€ç›´è§‚ï¼š** ä½¿ç”¨æ ‡ç­¾é¢œè‰²åŒºåˆ†çŠ¶æ€

### ç”¨æˆ·ä½“éªŒ
- **å¿«é€Ÿæ‰«æï¼š** è¡¨æ ¼å¸ƒå±€ä¾¿äºå¿«é€Ÿæµè§ˆ
- **å…³é”®ä¿¡æ¯çªå‡ºï¼š** ä»·æ ¼å³å¯¹é½ï¼ŒçŠ¶æ€ç”¨æ ‡ç­¾
- **æ“ä½œä¾¿æ·ï¼š** æ¯è¡Œéƒ½æœ‰å®Œæ•´çš„æ“ä½œæŒ‰é’®

## ğŸš€ ä¼˜åŒ–å»ºè®®

### 1. å­—æ®µå±•ç¤ºä¼˜åŒ–
**å¯è€ƒè™‘æ·»åŠ çš„å­—æ®µï¼š**
```vue
<!-- åœ¨æˆ·å‹è§„æ ¼ä¸­æ·»åŠ é˜³å° -->
{{ row.rooms }}å®¤{{ row.halls }}å…{{ row.bathrooms }}å«{{ row.balconies }}é˜³å°

<!-- æ·»åŠ æœå‘ä¿¡æ¯ -->
<el-table-column prop="standard_orientation" label="æœå‘" width="80" />

<!-- æ·»åŠ çƒ­é—¨æ ‡è®° -->
<el-table-column label="æ ‡è®°" width="60">
  <template #default="{ row }">
    <el-tag v-if="row.is_hot" type="danger" size="small">çƒ­é—¨</el-tag>
  </template>
</el-table-column>

<!-- æ˜¾ç¤ºå•ä»·ä¿¡æ¯ -->
<el-table-column label="å•ä»·" width="120" align="right">
  <template #default="{ row }">
    <div v-if="row.base_sale_price_per > 0">
      {{ row.base_sale_price_per }}å…ƒ/ã¡
    </div>
  </template>
</el-table-column>
```

### 2. äº¤äº’ä½“éªŒä¼˜åŒ–
```vue
<!-- æ·»åŠ ç­›é€‰åŠŸèƒ½ -->
<el-select v-model="filterStatus" placeholder="çŠ¶æ€ç­›é€‰">
  <el-option label="å…¨éƒ¨" value="" />
  <el-option label="æ­£å¸¸" value="active" />
  <el-option label="åœç”¨" value="inactive" />
</el-select>

<!-- æ·»åŠ æ’åºåŠŸèƒ½ -->
<el-table-column prop="standard_area" label="æ ‡å‡†é¢ç§¯" sortable />
<el-table-column prop="base_sale_price" label="å”®ä»·" sortable />
```

### 3. å“åº”å¼ä¼˜åŒ–
```vue
<!-- ç§»åŠ¨ç«¯é€‚é… -->
<el-table-column v-if="!isMobile" prop="description" label="æè¿°" />
```

## ğŸ“ æ€»ç»“

æˆ·å‹ç®¡ç†é¡µé¢çš„å­—æ®µå±•ç¤ºè®¾è®¡åˆç†ï¼Œé‡ç‚¹çªå‡ºäº†ç”¨æˆ·æœ€å…³å¿ƒçš„ä¿¡æ¯ï¼š
- **æ ¸å¿ƒä¿¡æ¯ï¼š** æˆ·å‹åç§°ã€ç¼–ç ã€è§„æ ¼
- **å•†ä¸šä¿¡æ¯ï¼š** é¢ç§¯ã€ä»·æ ¼ã€åº“å­˜
- **çŠ¶æ€ä¿¡æ¯ï¼š** å½“å‰çŠ¶æ€ã€æ“ä½œæŒ‰é’®

è™½ç„¶åç«¯APIè¿”å›äº†24ä¸ªå­—æ®µï¼Œä½†å‰ç«¯é¡µé¢ç²¾é€‰äº†11ä¸ªæœ€é‡è¦çš„å­—æ®µè¿›è¡Œå±•ç¤ºï¼Œå®ç°äº†ä¿¡æ¯çš„æœ‰æ•ˆç­›é€‰å’Œç”¨æˆ·ä½“éªŒçš„ä¼˜åŒ–ã€‚æœªæ¥å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œè€ƒè™‘æ·»åŠ æ›´å¤šå­—æ®µæˆ–æä¾›è¯¦æƒ…é¡µé¢å±•ç¤ºå®Œæ•´ä¿¡æ¯ã€‚
