# æ–°å¢æˆ·å‹åŠŸèƒ½ - ä¼˜åŒ–è¡¨å•è®¾è®¡æ–¹æ¡ˆ

**åˆ›å»ºæ—¶é—´ï¼š** 2024å¹´12æœˆ
**åŠŸèƒ½æ¨¡å—ï¼š** æˆ·å‹ç®¡ç†
**è®¾è®¡ç†å¿µï¼š** åˆ†æ­¥éª¤æ¸è¿›å¼è¡¨å•ï¼Œæ ¸å¿ƒä¿¡æ¯ä¼˜å…ˆ

## ğŸ¯ **è¡¨å•è®¾è®¡ç†å¿µ**

### **è®¾è®¡åŸåˆ™**
1. **æ ¸å¿ƒä¼˜å…ˆï¼š** æœ€é‡è¦çš„ä¿¡æ¯æ”¾åœ¨ç¬¬ä¸€æ­¥
2. **æ¸è¿›å¼ï¼š** ä»å¿…å¡«åˆ°é€‰å¡«ï¼Œé™ä½ç”¨æˆ·å¿ƒç†è´Ÿæ‹…
3. **ç›´è§‚æ˜“æ‡‚ï¼š** æ¯æ­¥èšç„¦ç‰¹å®šç±»å‹çš„ä¿¡æ¯
4. **çµæ´»æäº¤ï¼š** å®Œæˆç¬¬ä¸€æ­¥å³å¯ä¿å­˜ï¼Œåç»­å¯è¡¥å……

## ğŸ“‹ **åˆ†æ­¥éª¤è¡¨å•è®¾è®¡**

### ğŸ”´ **ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰**
**ç›®æ ‡ï¼š** åˆ›å»ºæˆ·å‹çš„æœ€å°å¯ç”¨ä¿¡æ¯

```vue
â”Œâ”€ ç¬¬1æ­¥ï¼šåŸºç¡€ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚ æˆ·å‹åç§°: [____________________] *   â”‚
â”‚ æˆ·å‹ç¼–ç : [____________________] *   â”‚
â”‚ å»ºç­‘é¢ç§¯: [____________________] * ã¡â”‚
â”‚ æ‰€å±æ¥¼ç›˜: [ä¸‹æ‹‰é€‰æ‹©_____________] *   â”‚
â”‚                                      â”‚
â”‚ [ä¸Šä¸€æ­¥]              [ä¿å­˜å¹¶ç»§ç»­] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè¯¦æƒ…ï¼š**
- **`name`** - æˆ·å‹åç§° *(varchar 100)*
- **`code`** - æˆ·å‹ç¼–ç  *(varchar 50)*
- **`standard_area`** - å»ºç­‘é¢ç§¯ *(decimal 8,2)*
- **`building_id`** - æ‰€å±æ¥¼ç›˜ *(å…³è”é€‰æ‹©)*

**éªŒè¯è§„åˆ™ï¼š**
```typescript
const step1Rules = {
  name: [
    { required: true, message: 'è¯·è¾“å…¥æˆ·å‹åç§°', trigger: 'blur' },
    { min: 1, max: 100, message: 'æˆ·å‹åç§°é•¿åº¦ä¸º1-100ä¸ªå­—ç¬¦', trigger: 'blur' }
  ],
  code: [
    { required: true, message: 'è¯·è¾“å…¥æˆ·å‹ç¼–ç ', trigger: 'blur' },
    { pattern: /^[A-Z0-9]+$/, message: 'æˆ·å‹ç¼–ç åªèƒ½åŒ…å«å¤§å†™å­—æ¯å’Œæ•°å­—', trigger: 'blur' }
  ],
  standard_area: [
    { required: true, message: 'è¯·è¾“å…¥å»ºç­‘é¢ç§¯', trigger: 'blur' },
    { type: 'number', min: 0.01, max: 9999.99, message: 'é¢ç§¯èŒƒå›´0.01-9999.99ã¡', trigger: 'blur' }
  ],
  building_id: [
    { required: true, message: 'è¯·é€‰æ‹©æ‰€å±æ¥¼ç›˜', trigger: 'change' }
  ]
}
```

### ğŸŸ¡ **ç¬¬äºŒæ­¥ï¼šæˆ·å‹å›¾ç‰‡ï¼ˆé€‰å¡«ï¼‰**
**ç›®æ ‡ï¼š** ä¸Šä¼ æˆ·å‹ç›¸å…³å›¾ç‰‡

```vue
â”Œâ”€ ç¬¬2æ­¥ï¼šæˆ·å‹å›¾ç‰‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚ æˆ·å‹å›¾ç‰‡:                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚   ä¸»å›¾ä¸Šä¼    â”‚ â”‚  æˆ·å‹å›¾ä¸Šä¼   â”‚      â”‚
â”‚ â”‚     +       â”‚ â”‚     +       â”‚      â”‚
â”‚ â”‚  ç‚¹å‡»ä¸Šä¼     â”‚ â”‚  ç‚¹å‡»ä¸Šä¼     â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                      â”‚
â”‚ æ›´å¤šå›¾ç‰‡:                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚  +  â”‚ â”‚  +  â”‚ â”‚  +  â”‚ â”‚  +  â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                      â”‚
â”‚ [ä¸Šä¸€æ­¥]              [ä¿å­˜å¹¶ç»§ç»­] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè¯¦æƒ…ï¼š**
- **`main_image`** - ä¸»å›¾URL *(varchar 500)*
- **`floor_plan_url`** - æˆ·å‹å›¾URL *(varchar 500)*
- **`image_urls`** - æ›´å¤šå›¾ç‰‡URLåˆ—è¡¨ *(JSON)*

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
- æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- å›¾ç‰‡å‹ç¼©å’Œæ ¼å¼éªŒè¯
- æ”¯æŒæ‰¹é‡ä¸Šä¼ 

### ğŸŸ¢ **ç¬¬ä¸‰æ­¥ï¼šæˆ·å‹å¸ƒå±€ï¼ˆé€‰å¡«ï¼‰**
**ç›®æ ‡ï¼š** è¯¦ç»†çš„æˆ·å‹è§„æ ¼ä¿¡æ¯

```vue
â”Œâ”€ ç¬¬3æ­¥ï¼šæˆ·å‹å¸ƒå±€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚ æˆ¿é—´å¸ƒå±€:                            â”‚
â”‚ æˆ¿é—´æ•°: [â–¼] å®¤  å®¢å…æ•°: [â–¼] å…       â”‚
â”‚ å«ç”Ÿé—´: [â–¼] å«  é˜³å°æ•°: [â–¼] ä¸ª       â”‚
â”‚                                      â”‚
â”‚ è§„æ ¼ä¿¡æ¯:                            â”‚
â”‚ å±‚    é«˜: [__________] ç±³             â”‚
â”‚ æœ    å‘: [__________]               â”‚
â”‚ æ™¯    è§‚: [__________]               â”‚
â”‚                                      â”‚
â”‚ [ä¸Šä¸€æ­¥]              [ä¿å­˜å¹¶ç»§ç»­] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè¯¦æƒ…ï¼š**
- **`rooms`** - æˆ¿é—´æ•° *(é»˜è®¤1)*
- **`halls`** - å®¢å…æ•° *(é»˜è®¤1)*
- **`bathrooms`** - å«ç”Ÿé—´æ•° *(é»˜è®¤1)*
- **`balconies`** - é˜³å°æ•° *(é»˜è®¤0)*
- **`floor_height`** - å±‚é«˜ *(decimal 4,2)*
- **`standard_orientation`** - æœå‘ *(varchar 50)*
- **`standard_view`** - æ™¯è§‚ *(varchar 100)*

**äº¤äº’ç‰¹æ€§ï¼š**
- æ•°å­—é€‰æ‹©å™¨ï¼ˆ1-9ï¼‰
- æœå‘é¢„è®¾é€‰é¡¹ï¼šå—å‘ã€åŒ—å‘ã€ä¸œå‘ã€è¥¿å‘ã€å—åŒ—ã€ä¸œè¥¿
- æ™¯è§‚é¢„è®¾é€‰é¡¹ï¼šå°åŒºæ™¯è§‚ã€åŸå¸‚æ™¯è§‚ã€æµ·æ™¯ã€å±±æ™¯ã€å›­æ™¯

### ğŸŸ¢ **ç¬¬å››æ­¥ï¼šå…¶ä»–ä¿¡æ¯ï¼ˆé€‰å¡«ï¼‰**
**ç›®æ ‡ï¼š** ä»·æ ¼ã€æè¿°ã€çŠ¶æ€ç­‰æ‰©å±•ä¿¡æ¯

```vue
â”Œâ”€ ç¬¬4æ­¥ï¼šå…¶ä»–ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚ ä»·æ ¼ä¿¡æ¯:                            â”‚
â”‚ åŸºå‡†å”®ä»·: [__________________] å…ƒ    â”‚
â”‚ åŸºå‡†ç§Ÿé‡‘: [__________________] å…ƒ/æœˆ â”‚
â”‚ â–¡ è‡ªåŠ¨è®¡ç®—å•ä»·                       â”‚
â”‚                                      â”‚
â”‚ æˆ·å‹æè¿°:                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚                                    â”‚â”‚
â”‚ â”‚                                    â”‚â”‚
â”‚ â”‚                                    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚ çŠ¶æ€è®¾ç½®:                            â”‚
â”‚ çŠ¶    æ€: [â–¼ æ­£å¸¸] â–¡ çƒ­é—¨æˆ·å‹         â”‚
â”‚                                      â”‚
â”‚ æˆ·å‹æ ‡ç­¾:                            â”‚
â”‚ [ç²¾è£…ä¿®] [å—åŒ—é€šé€] [é‡‡å…‰å¥½] [+æ·»åŠ ]  â”‚
â”‚                                      â”‚
â”‚ [ä¸Šä¸€æ­¥]                    [å®Œæˆ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè¯¦æƒ…ï¼š**
- **`base_sale_price`** - åŸºå‡†å”®ä»· *(decimal 12,2)*
- **`base_rent_price`** - åŸºå‡†ç§Ÿé‡‘ *(decimal 8,2)*
- **`base_sale_price_per`** - å”®ä»·å•ä»· *(è‡ªåŠ¨è®¡ç®—)*
- **`base_rent_price_per`** - ç§Ÿé‡‘å•ä»· *(è‡ªåŠ¨è®¡ç®—)*
- **`description`** - æˆ·å‹æè¿° *(text)*
- **`status`** - çŠ¶æ€ *(é»˜è®¤active)*
- **`is_hot`** - æ˜¯å¦çƒ­é—¨ *(é»˜è®¤false)*
- **`tags`** - æˆ·å‹æ ‡ç­¾ *(JSON)*

## ğŸ¨ **å‰ç«¯å®ç°è®¾è®¡**

### **Vueç»„ä»¶ç»“æ„**
```
HouseTypeForm.vue
â”œâ”€â”€ HouseTypeStep1.vue (åŸºç¡€ä¿¡æ¯)
â”œâ”€â”€ HouseTypeStep2.vue (æˆ·å‹å›¾ç‰‡)
â”œâ”€â”€ HouseTypeStep3.vue (æˆ·å‹å¸ƒå±€)
â””â”€â”€ HouseTypeStep4.vue (å…¶ä»–ä¿¡æ¯)
```

### **çŠ¶æ€ç®¡ç†**
```typescript
interface HouseTypeFormData {
  // ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ä¿¡æ¯
  name: string
  code: string
  standard_area: number
  building_id: number
  
  // ç¬¬äºŒæ­¥ï¼šå›¾ç‰‡ä¿¡æ¯
  main_image?: string
  floor_plan_url?: string
  image_urls?: string[]
  
  // ç¬¬ä¸‰æ­¥ï¼šå¸ƒå±€ä¿¡æ¯
  rooms: number
  halls: number
  bathrooms: number
  balconies: number
  floor_height?: number
  standard_orientation?: string
  standard_view?: string
  
  // ç¬¬å››æ­¥ï¼šå…¶ä»–ä¿¡æ¯
  base_sale_price?: number
  base_rent_price?: number
  description?: string
  status: string
  is_hot: boolean
  tags?: string[]
}
```

### **åˆ†æ­¥æäº¤é€»è¾‘**
```typescript
const formSteps = [
  { step: 1, title: 'åŸºç¡€ä¿¡æ¯', required: true },
  { step: 2, title: 'æˆ·å‹å›¾ç‰‡', required: false },
  { step: 3, title: 'æˆ·å‹å¸ƒå±€', required: false },
  { step: 4, title: 'å…¶ä»–ä¿¡æ¯', required: false }
]

// æ¯æ­¥éƒ½å¯ä»¥ä¿å­˜è‰ç¨¿
const saveDraft = async (stepData: Partial<HouseTypeFormData>) => {
  // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨æˆ–å‘é€åˆ°æœåŠ¡å™¨
}

// æœ€ç»ˆæäº¤
const submitForm = async (formData: HouseTypeFormData) => {
  // éªŒè¯å¿…å¡«å­—æ®µ
  // æäº¤åˆ°æœåŠ¡å™¨
  // æ¸…ç†è‰ç¨¿æ•°æ®
}
```

## ğŸ”§ **åç«¯APIè®¾è®¡**

### **åˆ†æ­¥æäº¤æ”¯æŒ**
```go
// POST /api/v1/house-types (åˆ›å»º)
// PUT /api/v1/house-types/:id (æ›´æ–°)
type CreateHouseTypeRequest struct {
    // ç¬¬ä¸€æ­¥ï¼šå¿…å¡«å­—æ®µ
    Name         string  `json:"name" binding:"required,min=1,max=100"`
    Code         string  `json:"code" binding:"required,max=50"`
    StandardArea float64 `json:"standard_area" binding:"required,gt=0"`
    BuildingID   uint    `json:"building_id" binding:"required,gt=0"`
    
    // ç¬¬äºŒæ­¥ï¼šå›¾ç‰‡å­—æ®µ
    MainImage    *string   `json:"main_image,omitempty"`
    FloorPlanUrl *string   `json:"floor_plan_url,omitempty"`
    ImageUrls    *[]string `json:"image_urls,omitempty"`
    
    // ç¬¬ä¸‰æ­¥ï¼šå¸ƒå±€å­—æ®µ
    Rooms               *int     `json:"rooms,omitempty" binding:"omitempty,gte=1"`
    Halls               *int     `json:"halls,omitempty" binding:"omitempty,gte=1"`
    Bathrooms           *int     `json:"bathrooms,omitempty" binding:"omitempty,gte=1"`
    Balconies           *int     `json:"balconies,omitempty" binding:"omitempty,gte=0"`
    FloorHeight         *float64 `json:"floor_height,omitempty"`
    StandardOrientation *string  `json:"standard_orientation,omitempty"`
    StandardView        *string  `json:"standard_view,omitempty"`
    
    // ç¬¬å››æ­¥ï¼šå…¶ä»–å­—æ®µ
    BaseSalePrice *float64 `json:"base_sale_price,omitempty" binding:"omitempty,gte=0"`
    BaseRentPrice *float64 `json:"base_rent_price,omitempty" binding:"omitempty,gte=0"`
    Description   *string  `json:"description,omitempty"`
    Status        *string  `json:"status,omitempty"`
    IsHot         *bool    `json:"is_hot,omitempty"`
    Tags          *[]string `json:"tags,omitempty"`
}
```

## ğŸ’¡ **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**

### **1. è¿›åº¦æŒ‡ç¤º**
- æ­¥éª¤å¯¼èˆªæ¡æ˜¾ç¤ºå½“å‰è¿›åº¦
- å·²å®Œæˆæ­¥éª¤æ˜¾ç¤ºç»¿è‰²å‹¾é€‰
- å½“å‰æ­¥éª¤é«˜äº®æ˜¾ç¤º

### **2. æ•°æ®ä¿å­˜**
- æ¯æ­¥å®Œæˆåè‡ªåŠ¨ä¿å­˜è‰ç¨¿
- æ”¯æŒéšæ—¶é€€å‡ºå’Œç»§ç»­ç¼–è¾‘
- æµè§ˆå™¨å…³é—­å‰æé†’ä¿å­˜

### **3. æ™ºèƒ½æç¤º**
- æˆ·å‹ç¼–ç æ ¼å¼æç¤º
- é¢ç§¯åˆç†èŒƒå›´å»ºè®®
- ä»·æ ¼å•ä»·è‡ªåŠ¨è®¡ç®—æ˜¾ç¤º

### **4. å¿«æ·æ“ä½œ**
- æ”¯æŒé”®ç›˜å¯¼èˆªï¼ˆTabé”®ï¼‰
- å›è½¦é”®å¿«é€Ÿä¸‹ä¸€æ­¥
- æ”¯æŒè·³æ­¥ç¼–è¾‘ï¼ˆå·²å®Œæˆçš„æ­¥éª¤ï¼‰

## ğŸ¯ **å®æ–½ä¼˜å…ˆçº§**

### **ç¬¬ä¸€é˜¶æ®µï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰**
1. âœ… å®ç°ç¬¬ä¸€æ­¥åŸºç¡€ä¿¡æ¯è¡¨å•
2. âœ… åç«¯APIåˆ›å»ºå’ŒéªŒè¯
3. âœ… åŸºç¡€çš„è¡¨å•éªŒè¯å’Œæäº¤

### **ç¬¬äºŒé˜¶æ®µï¼ˆå›¾ç‰‡åŠŸèƒ½ï¼‰**
1. ğŸ”„ å›¾ç‰‡ä¸Šä¼ ç»„ä»¶
2. ğŸ”„ å›¾ç‰‡é¢„è§ˆå’Œç®¡ç†
3. ğŸ”„ å›¾ç‰‡å­˜å‚¨å’Œè®¿é—®

### **ç¬¬ä¸‰é˜¶æ®µï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰**
1. ğŸ”„ ç¬¬ä¸‰æ­¥å¸ƒå±€ä¿¡æ¯è¡¨å•
2. ğŸ”„ ç¬¬å››æ­¥æ‰©å±•ä¿¡æ¯è¡¨å•
3. ğŸ”„ åˆ†æ­¥å¯¼èˆªå’ŒçŠ¶æ€ç®¡ç†

### **ç¬¬å››é˜¶æ®µï¼ˆä½“éªŒä¼˜åŒ–ï¼‰**
1. ğŸ”„ è‰ç¨¿ä¿å­˜åŠŸèƒ½
2. ğŸ”„ æ™ºèƒ½æç¤ºå’Œè®¡ç®—
3. ğŸ”„ è¡¨å•éªŒè¯ä¼˜åŒ–

è¿™æ ·çš„è®¾è®¡æ—¢ä¿è¯äº†æ ¸å¿ƒåŠŸèƒ½çš„å¿«é€Ÿå®ç°ï¼Œåˆä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•ç•™ä¸‹äº†å……åˆ†çš„ç©ºé—´ã€‚æ‚¨è§‰å¾—è¿™ä¸ªä¼˜åŒ–åçš„è¡¨å•è®¾è®¡å¦‚ä½•ï¼Ÿ
